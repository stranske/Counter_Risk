## Autofix diagnostic note

- Date (UTC): 2026-02-15
- PR: #104
- Gate run: 22041647007
- Head SHA: `42ad4595b97573f7051f7d81a692581f9c6c321d`

### Observed failure context

- Reported failing jobs:
  - `Python CI / python 3.11` (`Finalize check results`)
  - `gate-summary` (`Enforce Gate success`)
- `gate-summary` is downstream and failed because `python-ci` reported failure.

### Root-cause signal and approach

- Local Python 3.11 checks passed, including full pytest+coverage, but CI was repeatedly failing at finalization.
- The heaviest tests were concentrated in `tests/pipeline/test_run_pipeline.py`, where multiple tests executed full parse/update/write paths despite only asserting wrapper or path behavior.
- To reduce timeout sensitivity, non-E2E tests were updated to stub expensive pipeline internals while preserving their intended assertions.

### Changes made

- Added `_minimal_parsed_by_variant()` helper in `tests/pipeline/test_run_pipeline.py`.
- For these tests, patched `_parse_inputs` and/or downstream heavy stages:
  - `test_run_pipeline_wraps_output_write_errors`
  - `test_run_pipeline_wraps_manifest_generation_errors`
  - `test_run_pipeline_invokes_ppt_link_refresh`
  - `test_run_pipeline_ignores_config_output_root_for_run_directory`

### Validation

- `pytest -q tests/pipeline/test_run_pipeline.py` -> `20 passed in 81.41s`
- `ruff check src tests` -> passed
- `mypy src` -> passed
- `python scripts/sync_dev_dependencies.py --check` -> passed
- `python scripts/sync_test_dependencies.py --verify` -> passed
- Full CI-equivalent pytest+coverage command:
  - `375 passed, 3 skipped in 696.65s (0:11:36)`
  - Coverage total `85%` (minimum is `80%`)

### Runtime impact

- Prior full-suite run on this branch was ~17m39s.
- After optimization, full-suite runtime was ~11m36s (about 6 minutes faster).
