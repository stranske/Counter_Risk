version: 1
issue: 14
base: main
branch: codex/issue-14
tasks:
  - id: task-01
    title: Create `src/counter_risk/parsers/cprs_ch.py`
    status: done
    started_at: '2026-02-13T03:35:04Z'
    finished_at: '2026-02-13T03:35:15Z'
    commit: 971857a0b044380f413c72e11a56825a7f79cea9
    notes: []
  - id: task-02
    title: Implement `parse_cprs_ch(path) -> pandas.DataFrame` in `src/counter_risk/parsers/cprs_ch.py`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: 'Implement basic file loading (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: 'Excel sheet reading in parse_cprs_ch function (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: 'Define the output DataFrame schema with all expected columns (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: 'Define the output DataFrame schema with their data types (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: 'Implement row scanning logic to identify header rows (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: 'data boundaries (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: 'Create helper functions to extract (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: 'clean individual cell values from the sheet (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: 'Add error handling for missing files (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: 'malformed Excel structures (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: Add segment detection in `parse_cprs_ch` by scanning labels (e.g., Swaps/Repo/Futures/Futures-CDX)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: 'Define the list of expected segment labels (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: 'their identifying patterns (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: 'Implement a function to scan rows (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: 'identify segment boundary markers (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: 'Create a data structure to store segment metadata including start row
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: 'Create a data structure to store segment metadata including segment type
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: 'Add logic to associate data rows with their corresponding segment labels
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: 'Define scope for: Implement validation to ensure all expected segments
      are found in the input file (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: 'Implement focused slice for: Implement validation to ensure all expected
      segments are found in the input file (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: 'Validate focused slice for: Implement validation to ensure all expected
      segments are found in the input file (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: 'Implement extraction of numeric columns when present: Cash, TIPS, Treasury,
      Equity, Commodity, Currency, Notional'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-25
    title: 'Define scope for: Create a mapping of column names to their expected positions
      or header text (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-26
    title: 'Implement focused slice for: Create a mapping of column names to their
      expected positions or header text (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-27
    title: 'Validate focused slice for: Create a mapping of column names to their
      expected positions or header text (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-28
    title: 'Implement a generic numeric extraction function that handles various Excel
      number formats (verify: formatter passes)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-29
    title: 'Add specific extraction logic for each column type with appropriate type
      conversion (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-30
    title: 'Define scope for: Implement column presence detection to handle optional
      columns gracefully (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-31
    title: 'Implement focused slice for: Implement column presence detection to handle
      optional columns gracefully (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-32
    title: 'Validate focused slice for: Implement column presence detection to handle
      optional columns gracefully (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-33
    title: 'Add validation to ensure extracted numeric values fall within expected
      ranges (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-34
    title: Fix numeric field handling to normalize blanks to `0` for numeric fields
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-35
    title: Add test fixture for "All Programs" variant covering Swaps, Repo, Futures/CDX
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-36
    title: Add test fixture for "Ex Trend" variant covering Swaps, Repo
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-37
    title: Add test fixture for "Trend" variant covering Futures only
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-38
    title: Write tests asserting `parse_cprs_ch(path)` parses each fixture variant
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-39
    title: 'Define scope for: Write test case for All Programs variant verifying Swaps
      segment is parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-40
    title: 'Implement focused slice for: Write test case for All Programs variant
      verifying Swaps segment is parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-41
    title: 'Validate focused slice for: Write test case for All Programs variant verifying
      Swaps segment is parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-42
    title: 'Define scope for: Write test case for All Programs variant verifying Repo
      segment is parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-43
    title: 'Implement focused slice for: Write test case for All Programs variant
      verifying Repo segment is parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-44
    title: 'Validate focused slice for: Write test case for All Programs variant verifying
      Repo segment is parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-45
    title: 'Write test case for All Programs variant verifying Futures (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-46
    title: 'CDX segments are parsed correctly (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-47
    title: 'Write test case for Ex Trend variant verifying only Swaps (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-48
    title: 'Repo segments are present (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-49
    title: 'Write test case for Trend variant verifying only Futures segment is present
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-50
    title: 'other segments are absent (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-51
    title: Running the test suite shows `parse_cprs_ch(path)` returns a non-empty
      `DataFrame` for each fixture variant (All Programs, Ex Trend, Trend)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-52
    title: Inspecting the parsed output confirms stable columns are present and numeric
      fields (Cash, TIPS, Treasury, Equity, Commodity, Currency, Notional) have numeric
      dtypes
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-53
    title: Add `src/counter_risk/parsers/cprs_ch.py`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-54
    title: Implement `parse_cprs_ch(path) -> DataFrame`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-55
    title: Detect segments present by scanning labels (e.g., Swaps/Repo/Futures/Futures-CDX)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-56
    title: 'Extract numeric columns when present: Cash, TIPS, Treasury, Equity, Commodity,
      Currency, Notional'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-57
    title: Normalize blanks to 0 for numeric fields
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-58
    title: 'Add tests for:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-59
    title: 'All Programs: includes Swaps, Repo, Futures/CDX'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-60
    title: 'Ex Trend: includes Swaps, Repo'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-61
    title: 'Trend: includes Futures only'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-62
    title: Parser returns non-empty dataframes for each fixture variant
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-63
    title: Output includes stable columns and numeric dtypes for numeric fields
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
