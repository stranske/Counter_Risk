version: 1
issue: 37
base: main
branch: codex/issue-37
tasks:
  - id: task-01
    title: Add `reconcile_series_coverage()` to compare counterparties/clearing houses
      in current-month parsed data vs historical workbook series headers (per sheet).
    status: done
    started_at: '2026-02-17T23:03:28Z'
    finished_at: '2026-02-17T23:03:42Z'
    commit: 6d7273c626e3f45f00c9296b7e455f6e92efeab5
    notes: []
  - id: task-02
    title: 'Define scope for: Create the reconcile_series_coverage function signature
      with input parameters for parsed data (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: 'Implement focused slice for: Create the reconcile_series_coverage function
      signature with input parameters for parsed data (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: 'Validate focused slice for: Create the reconcile_series_coverage function
      signature with input parameters for parsed data (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: 'Create the reconcile_series_coverage function signature with historical
      headers (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: 'Implement logic to extract counterparties (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: 'clearing houses from current-month parsed data (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: 'Implement logic to extract series headers from historical workbook per
      sheet (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: 'Implement comparison logic to identify differences between current data
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: 'historical headers (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: 'Add per-sheet reconciliation result aggregation (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: 'reporting (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: Add checks in `reconcile_series_coverage()` to detect unmapped counterparties
      after normalization.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: 'Define the criteria for identifying an unmapped counterparty after normalization
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: 'Implement detection logic to identify counterparties that failed normalization
      mapping (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: 'Add reporting structure to capture unmapped counterparty details including
      original (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: 'Add reporting structure to capture unmapped counterparty details including
      attempted normalized names (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: Add checks in `reconcile_series_coverage()` to detect counterparties present
      in data but missing in historical headers.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: 'Define scope for: Implement logic to identify counterparties present in
      parsed data but absent from historical headers (verify: confirm completion in
      repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: 'Implement focused slice for: Implement logic to identify counterparties
      present in parsed data but absent from historical headers (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: 'Validate focused slice for: Implement logic to identify counterparties
      present in parsed data but absent from historical headers (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: 'Add differentiation logic to distinguish new counterparties from normalization
      mapping failures (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: 'Create structured output format for missing counterparty reports including
      sheet (verify: formatter passes)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: 'Create structured output format for missing counterparty reports including
      data source context (verify: formatter passes)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-25
    title: Add checks in `reconcile_series_coverage()` to detect segments expected
      by variant but missing in parsed results.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-26
    title: 'Define the structure for variant segment expectations in configuration
      (verify: config validated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-27
    title: 'Implement logic to read expected segments from variant configuration (verify:
      config validated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-28
    title: 'Implement validation logic to compare expected segments against parsed
      results (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-29
    title: 'Add reporting for missing segments including variant name (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-30
    title: 'Add reporting for missing segments including expected segment identifiers
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-31
    title: Implement a fail-policy configuration for reconciliation with modes `strict`
      (fail run on any missing series) and `warn` (continue but write warnings).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-32
    title: 'Define the fail-policy configuration schema with strict (verify: config
      validated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-33
    title: 'Define the fail-policy configuration schema with warn mode options (verify:
      config validated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-34
    title: 'Implement configuration parsing (verify: config validated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-35
    title: 'validation for fail-policy settings (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-36
    title: 'Implement strict mode behavior to raise exceptions when reconciliation
      gaps are detected (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-37
    title: 'Implement warn mode behavior to log warnings (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-38
    title: 'continue execution when gaps are detected (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-39
    title: 'Add configuration documentation explaining strict (verify: docs updated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-40
    title: 'warn mode behaviors (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-41
    title: Write `NEEDS_MAPPING_UPDATES.txt` into the run folder when reconciliation
      gaps exist, containing a human-readable summary of missing/unmapped series.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-42
    title: 'Define the content structure (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-43
    title: 'format for NEEDS_MAPPING_UPDATES.txt file (verify: formatter passes)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-44
    title: 'Implement logic to generate human-readable summary text from reconciliation
      gap data (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-45
    title: 'Define scope for: Implement file writing logic to create NEEDS_MAPPING_UPDATES.txt
      in the run folder (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-46
    title: 'Implement focused slice for: Implement file writing logic to create NEEDS_MAPPING_UPDATES.txt
      in the run folder (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-47
    title: 'Validate focused slice for: Implement file writing logic to create NEEDS_MAPPING_UPDATES.txt
      in the run folder (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-48
    title: 'Add timestamp (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-49
    title: 'run identifier metadata to the mapping updates file (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-50
    title: Add tests that introduce a fake new counterparty and verify `warn` mode
      emits warnings and `strict` mode fails.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-51
    title: 'Create test fixture with fake new counterparty data for reconciliation
      testing (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-52
    title: 'Define scope for: Implement test case verifying warn mode emits warnings
      when new counterparty is detected (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-53
    title: 'Implement focused slice for: Implement test case verifying warn mode emits
      warnings when new counterparty is detected (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-54
    title: 'Validate focused slice for: Implement test case verifying warn mode emits
      warnings when new counterparty is detected (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-55
    title: 'Define scope for: Implement test case verifying warn mode completes successfully
      despite new counterparty (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-56
    title: 'Implement focused slice for: Implement test case verifying warn mode completes
      successfully despite new counterparty (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-57
    title: 'Validate focused slice for: Implement test case verifying warn mode completes
      successfully despite new counterparty (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-58
    title: 'Define scope for: Implement test case verifying strict mode raises exception
      when new counterparty is detected (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-59
    title: 'Implement focused slice for: Implement test case verifying strict mode
      raises exception when new counterparty is detected (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-60
    title: 'Validate focused slice for: Implement test case verifying strict mode
      raises exception when new counterparty is detected (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-61
    title: 'Implement test case verifying strict mode prevents run completion when
      gaps exist (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-62
    title: In `warn` mode, a run with a new/unmapped counterparty produces a reconciliation
      warning and still completes (non-zero gaps result in warnings).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-63
    title: In `strict` mode, a run with a new/unmapped counterparty fails (non-zero
      gaps cause a failure/exception/exit as implemented).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-64
    title: When reconciliation gaps exist, `NEEDS_MAPPING_UPDATES.txt` is created
      in the run folder.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-65
    title: The run manifest includes reconciliation warnings and the count of impacted
      rows and/or series.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-66
    title: 'Add `reconcile_series_coverage()` that compares:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-67
    title: counterparties/clearing houses in current month data
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-68
    title: vs historical workbook series headers (per sheet)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-69
    title: 'Add checks for:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-70
    title: unmapped counterparties after normalization
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-71
    title: counterparties present in data but missing in historical headers
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-72
    title: segments expected by variant but missing in parsed results
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-73
    title: 'Implement a fail policy config:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-74
    title: strict = fail run on any missing series
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-75
    title: warn = continue but write warnings
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-76
    title: Write a human-readable `NEEDS_MAPPING_UPDATES.txt` into the run folder
      when gaps exist
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-77
    title: Add tests that intentionally introduce a fake new counterparty and verify
      warning/fail behavior
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-78
    title: Runs never silently drop exposures without producing a warning or failing
      (per config)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-79
    title: The run manifest lists reconciliation warnings and the count of impacted
      rows/series
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
