version: 1
issue: 19
base: main
branch: codex/issue-19
tasks:
  - id: task-01
    title: Create `src/counter_risk/renderers/table_png.py`.
    status: doing
    started_at: '2026-02-13T04:41:15Z'
    finished_at: null
    commit: ''
    notes: []
  - id: task-02
    title: Implement `render_cprs_ch_png(exposures_df, output_png)` in `src/counter_risk/renderers/table_png.py`
      to write a deterministic PNG.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: 'Choose (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: 'document the PNG rendering library to use for table generation (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: 'Define the table layout structure including columns (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: 'Define the table layout structure including headers (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: 'Define the table layout structure including and styling for CPRS-CH view
      (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: 'Implement data transformation logic to convert exposures_df into renderable
      table format (verify: formatter passes)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: 'Implement the PNG rendering logic with deterministic font (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: 'Implement the PNG rendering logic with color settings (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: 'Add error handling for missing or malformed data in exposures_df (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: 'Define scope for: Write unit tests for render_cprs_ch_png with sample
      exposures_df data (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: 'Implement focused slice for: Write unit tests for render_cprs_ch_png with
      sample exposures_df data (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: 'Validate focused slice for: Write unit tests for render_cprs_ch_png with
      sample exposures_df data (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: Implement `render_cprs_fcm_png(fcm_totals_df, futures_detail_df, output_png)`
      in `src/counter_risk/renderers/table_png.py` to write a deterministic PNG.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: 'Define the combined table layout structure for fcm_totals_df (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: 'futures_detail_df (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: 'Implement data transformation logic to merge or stack the two dataframes
      appropriately (verify: formatter passes)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: 'Implement the PNG rendering logic for the combined CPRS-FCM view (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: 'Add validation logic to ensure both dataframes have expected columns (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: 'data types (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: 'Define scope for: Write unit tests for render_cprs_fcm_png with sample
      fcm_totals_df (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: 'Implement focused slice for: Write unit tests for render_cprs_fcm_png
      with sample fcm_totals_df (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: 'Validate focused slice for: Write unit tests for render_cprs_fcm_png with
      sample fcm_totals_df (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-25
    title: 'Define scope for: Write unit tests for render_cprs_fcm_png with futures_detail_df
      data (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-26
    title: 'Implement focused slice for: Write unit tests for render_cprs_fcm_png
      with futures_detail_df data (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-27
    title: 'Validate focused slice for: Write unit tests for render_cprs_fcm_png with
      futures_detail_df data (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-28
    title: Create `src/counter_risk/writers/pptx_screenshots.py`.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-29
    title: Implement `replace_screenshot_pictures(pptx_in, images_by_section, pptx_out)`
      in `src/counter_risk/writers/pptx_screenshots.py`.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-30
    title: 'Implement logic to parse (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-31
    title: 'identify section titles from PPTX slides (verify: confirm completion in
      repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-32
    title: 'Implement logic to count (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-33
    title: 'locate existing picture shapes on each slide (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-34
    title: 'Create the slide matching algorithm using section title (verify: confirm
      completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-35
    title: 'picture count criteria (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-36
    title: 'Implement the picture replacement logic that preserves position (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-37
    title: 'size of existing shapes (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-38
    title: 'Add error handling for missing sections or mismatched picture counts (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-39
    title: 'Write unit tests for replace_screenshot_pictures with a sample PPTX file
      (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-40
    title: Implement slide targeting in `replace_screenshot_pictures(...)` by matching
      existing picture count/position plus section title (do not rely only on hardcoded
      slide numbers).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-41
    title: 'Define scope for: Define the data structure for images_by_section parameter
      mapping sections to image paths (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-42
    title: 'Implement focused slice for: Define the data structure for images_by_section
      parameter mapping sections to image paths (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-43
    title: 'Validate focused slice for: Define the data structure for images_by_section
      parameter mapping sections to image paths (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-44
    title: 'Document the slide matching algorithm logic in implementation notes or
      docstrings (verify: docs updated)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-45
    title: 'Add logging to report which slides were matched (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-46
    title: 'replaced for debugging purposes (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-47
    title: Write tests that run `replace_screenshot_pictures(...)`, save the output
      PPTX, and assert it still has 23 slides.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-48
    title: Running the replacement workflow produces a PPTX file that opens without
      error.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-49
    title: Inspecting the target screenshot slides shows existing picture shapes were
      replaced (not appended), with picture count unchanged after replacement.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-50
    title: Running `render_cprs_ch_png(...)` and `render_cprs_fcm_png(...)` generates
      PNGs for all three variants without errors.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-51
    title: Add `src/counter_risk/renderers/table_png.py`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-52
    title: 'Implement deterministic PNG renderers:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-53
    title: '`render_cprs_ch_png(exposures_df, output_png)`'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-54
    title: '`render_cprs_fcm_png(fcm_totals_df, futures_detail_df, output_png)`'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-55
    title: Add `src/counter_risk/writers/pptx_screenshots.py`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-56
    title: Implement `replace_screenshot_pictures(pptx_in, images_by_section, pptx_out)`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-57
    title: "Identify target slides by existing picture count/position + section title\
      \ (don\u2019t hardcode slide numbers only)"
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-58
    title: 'Add tests: output PPTX saves and still has 23 slides'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-59
    title: Output PPTX opens cleanly
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-60
    title: "Screenshot slides\u2019 picture shapes are replaced (not appended)"
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-61
    title: PNGs are generated for all three variants without errors
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
